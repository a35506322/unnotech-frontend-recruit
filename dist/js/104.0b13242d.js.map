{"version":3,"file":"js/104.0b13242d.js","mappings":"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","sources":["webpack://unnotech-frontend-recruit/./src/views/BookListPage.vue","webpack://unnotech-frontend-recruit/./src/views/BookListPage.vue?bf28"],"sourcesContent":["<template>\n  <div class=\"d-flex justify-content-center align-content-center relative mb-3\">\n    <h1>書本列表</h1>\n    <div class=\"d-flex align-items-center\">\n      <span class=\"p-input-icon-left\">\n        <i class=\"pi pi-search\" />\n        <p-inputtext type=\"text\" v-on:input=\"searchBook\" v-model=\"bookKeyWord\"\n        placeholder=\"請輸入書名\"></p-inputtext>\n      </span>\n    </div>\n    <div class=\"absolute top-25 right-0\">\n      <p-button\n        icon=\"pi pi-plus-circle\"\n        label=\"新增\"\n        class=\"p-button-success p-button-lg\"\n        v-on:click=\"openCommandBook\"\n      ></p-button>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div\n      class=\"col-sm-12 col-md-6 flex justify-content-center\"\n      v-for=\"book in booksOfPage\"\n      v-bind:key=\"book.id\"\n    >\n      <div class=\"relative\">\n        <router-link :to=\"{ path: `/books/${book.id}/`}\" style=\"text-decoration:none\">\n          <p-card\n            class=\"card-wrapper transition-linear transition-duration-500\n            bg-blue-500 hover:bg-yellow-500 text-white hover:text-gray-900\"\n          >\n            <template #title>書名：{{ book.title }}</template>\n            <template #content>\n              <p>作者：{{ book.author }}</p>\n            </template>\n          </p-card>\n        </router-link>\n        <p-button\n          icon=\"bi bi-trash\"\n          class=\"p-button-rounded p-button-danger p-button-lg ml-2 absolute top--10 right--5\"\n          v-on:click=\"deleteBookById(book)\"\n        >\n        </p-button>\n      </div>\n    </div>\n    <p-paginator v-bind:rows=\"rows\" v-bind:totalRecords=\"pageCount\" ref=\"paginator\"\n    v-on:page=\"onPage($event)\"></p-paginator>\n  </div>\n  <command-book ref=\"commandBook\" v-bind:is-new=\"true\" v-on:save-item=\"saveAddBook\"\n  v-bind:is-loading=\"loading\" v-bind:tempItem=\"{}\"></command-book>\n  <p-confirm-dialog></p-confirm-dialog>\n</template>\n\n<script>\n// eslint-disable-next-line import/no-cycle\nimport { getBooks, addBook, deleteBook } from '@/apis/SystemApi';\nimport commandBook from '@/components/CommandBook.vue';\n\nexport default {\n  components: {\n    'command-book': commandBook,\n  },\n  data() {\n    return {\n      books: [],\n      loading: false,\n      rows: 0,\n      booksOfPage: [],\n      bookKeyWord: '',\n      pageCount: 0,\n    };\n  },\n  async mounted() {\n    this.rows = 5;\n    if (!this.$store.state.booksPageCurrentStart && !this.$store.state.booksPageCurrentEnd) {\n      this.$store.commit('endowBooksPageCurrentStart', 0);\n      this.$store.commit('endowBooksPageCurrentEnd', this.rows);\n      this.$refs.paginator.d_first = this.$store.state.booksPageCurrentStart;\n    }\n    this.bookKeyWord = this.$store.state.bookKeyWord;\n    await this.getBooks();\n    this.reloadPageInfo();\n  },\n  methods: {\n    async getBooks() {\n      const response = await getBooks().then((res) => res);\n      if (response.status !== 200) {\n        return;\n      }\n      this.books = response.data;\n    },\n    openCommandBook() {\n      this.$refs.commandBook.show();\n    },\n    async saveAddBook(book) {\n      this.loading = true;\n      const response = await addBook(book).then((res) => res);\n      if (response.status !== 201) {\n        this.loading = false;\n        return;\n      }\n      this.$toast.add({\n        severity: 'success', summary: '新增成功', detail: '', life: 3000,\n      });\n      await this.getBooks();\n      this.reloadPageInfo();\n      this.loading = false;\n    },\n    deleteBookById(book) {\n      this.$confirm.require({\n        message: `確定要刪除此本書籍 『${book.title ? book.title : ''}』 嗎?`,\n        header: '刪除警告',\n        icon: 'pi pi-exclamation-triangle',\n        accept: async () => {\n          const response = await deleteBook(book.id).then((res) => res);\n          if (response.status !== 200) {\n            return;\n          }\n          this.$toast.add({\n            severity: 'success', summary: '刪除成功', detail: '', life: 3000,\n          });\n          await this.getBooks();\n          this.reloadPageInfo();\n        },\n        reject: () => {\n        },\n      });\n    },\n    async onPage(event) {\n      this.$store.commit('endowBooksPageCurrentStart', this.rows * event.page);\n      this.$store.commit('endowBooksPageCurrentEnd', this.rows * (event.page + 1));\n      this.reloadPageInfo();\n    },\n    filterBookByTitle() {\n      const result = this.books.filter((book) => {\n        if (!book.title) { return false; }\n        return book.title.includes(this.$store.state.bookKeyWord);\n      });\n      return result;\n    },\n    reloadPageInfo() {\n      // 當有搜尋關鍵字時候\n      if (this.bookKeyWord) {\n        const filterBooks = this.filterBookByTitle();\n        this.booksOfPage = filterBooks.slice(\n          this.$store.state.booksPageCurrentStart,\n          this.$store.state.booksPageCurrentEnd,\n        );\n        this.pageCount = filterBooks.length;\n      } else {\n        this.booksOfPage = this.books.slice(\n          this.$store.state.booksPageCurrentStart,\n          this.$store.state.booksPageCurrentEnd,\n        );\n        this.pageCount = this.books.length;\n      }\n      this.$refs.paginator.d_first = this.$store.state.booksPageCurrentStart;\n    },\n    searchBook() {\n      this.$store.commit('endowBooksKeyWord', this.bookKeyWord);\n      this.$store.commit('endowBooksPageCurrentStart', 0);\n      this.$store.commit('endowBooksPageCurrentEnd', this.rows);\n      this.reloadPageInfo();\n      this.$refs.paginator.d_first = 0;\n    },\n  },\n};\n</script>\n\n<style scoped>\n  .card-wrapper {\n    width: 25rem;\n    margin-bottom: 2em;\n    cursor: pointer;\n  }\n\n  .top-25 {\n    top: 25%;\n  }\n\n  .top--10 {\n    top: -10%;\n  }\n\n  .right--5 {\n    right: -5%;\n  }\n</style>\n","import { render } from \"./BookListPage.vue?vue&type=template&id=3718eedd&scoped=true\"\nimport script from \"./BookListPage.vue?vue&type=script&lang=js\"\nexport * from \"./BookListPage.vue?vue&type=script&lang=js\"\n\nimport \"./BookListPage.vue?vue&type=style&index=0&id=3718eedd&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\莊理竣\\\\OneDrive\\\\桌面\\\\unnotech-frontend-recruit\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3718eedd\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_2","_hoisted_5","_createVNode","_component_p_inputtext","type","onInput","$options","$data","$event","placeholder","_component_p_button","icon","label","onClick","_createElementBlock","_Fragment","_renderList","book","key","id","_component_router_link","to","path","style","_component_p_card","title","_toDisplayString","content","author","_component_p_paginator","rows","totalRecords","ref","onPage","_component_command_book","onSaveItem","tempItem","_component_p_confirm_dialog","components","commandBook","data","books","loading","booksOfPage","bookKeyWord","pageCount","async","this","$store","state","booksPageCurrentStart","booksPageCurrentEnd","commit","$refs","paginator","d_first","getBooks","reloadPageInfo","methods","response","then","res","status","openCommandBook","show","addBook","$toast","add","severity","summary","detail","life","deleteBookById","$confirm","require","message","header","accept","deleteBook","reject","event","page","filterBookByTitle","result","filter","includes","filterBooks","slice","length","searchBook","__exports__","render"],"sourceRoot":""}