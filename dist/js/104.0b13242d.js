"use strict";(self["webpackChunkunnotech_frontend_recruit"]=self["webpackChunkunnotech_frontend_recruit"]||[]).push([[104],{9104:function(t,o,e){e.r(o),e.d(o,{default:function(){return y}});var s=e(3396),a=e(7139);const n=t=>((0,s.dD)("data-v-3718eedd"),t=t(),(0,s.Cn)(),t),i={class:"d-flex justify-content-center align-content-center relative mb-3"},r=n((()=>(0,s._)("h1",null,"書本列表",-1))),l={class:"d-flex align-items-center"},d={class:"p-input-icon-left"},c=n((()=>(0,s._)("i",{class:"pi pi-search"},null,-1))),u={class:"absolute top-25 right-0"},h={class:"row"},g={class:"relative"};function k(t,o,e,n,k,p){const m=(0,s.up)("p-inputtext"),b=(0,s.up)("p-button"),f=(0,s.up)("p-card"),w=(0,s.up)("router-link"),y=(0,s.up)("p-paginator"),C=(0,s.up)("command-book"),B=(0,s.up)("p-confirm-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",i,[r,(0,s._)("div",l,[(0,s._)("span",d,[c,(0,s.Wm)(m,{type:"text",onInput:p.searchBook,modelValue:k.bookKeyWord,"onUpdate:modelValue":o[0]||(o[0]=t=>k.bookKeyWord=t),placeholder:"請輸入書名"},null,8,["onInput","modelValue"])])]),(0,s._)("div",u,[(0,s.Wm)(b,{icon:"pi pi-plus-circle",label:"新增",class:"p-button-success p-button-lg",onClick:p.openCommandBook},null,8,["onClick"])])]),(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.booksOfPage,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"col-sm-12 col-md-6 flex justify-content-center",key:t.id},[(0,s._)("div",g,[(0,s.Wm)(w,{to:{path:`/books/${t.id}/`},style:{"text-decoration":"none"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"card-wrapper transition-linear transition-duration-500 bg-blue-500 hover:bg-yellow-500 text-white hover:text-gray-900"},{title:(0,s.w5)((()=>[(0,s.Uk)("書名："+(0,a.zw)(t.title),1)])),content:(0,s.w5)((()=>[(0,s._)("p",null,"作者："+(0,a.zw)(t.author),1)])),_:2},1024)])),_:2},1032,["to"]),(0,s.Wm)(b,{icon:"bi bi-trash",class:"p-button-rounded p-button-danger p-button-lg ml-2 absolute top--10 right--5",onClick:o=>p.deleteBookById(t)},null,8,["onClick"])])])))),128)),(0,s.Wm)(y,{rows:k.rows,totalRecords:k.pageCount,ref:"paginator",onPage:o[1]||(o[1]=t=>p.onPage(t))},null,8,["rows","totalRecords"])]),(0,s.Wm)(C,{ref:"commandBook","is-new":!0,onSaveItem:p.saveAddBook,"is-loading":k.loading,tempItem:{}},null,8,["onSaveItem","is-loading"]),(0,s.Wm)(B)],64)}e(6699);var p=e(6122),m=e(8363),b={components:{"command-book":m.Z},data(){return{books:[],loading:!1,rows:0,booksOfPage:[],bookKeyWord:"",pageCount:0}},async mounted(){this.rows=5,this.$store.state.booksPageCurrentStart||this.$store.state.booksPageCurrentEnd||(this.$store.commit("endowBooksPageCurrentStart",0),this.$store.commit("endowBooksPageCurrentEnd",this.rows),this.$refs.paginator.d_first=this.$store.state.booksPageCurrentStart),this.bookKeyWord=this.$store.state.bookKeyWord,await this.getBooks(),this.reloadPageInfo()},methods:{async getBooks(){const t=await(0,p.yZ)().then((t=>t));200===t.status&&(this.books=t.data)},openCommandBook(){this.$refs.commandBook.show()},async saveAddBook(t){this.loading=!0;const o=await(0,p.TA)(t).then((t=>t));201===o.status?(this.$toast.add({severity:"success",summary:"新增成功",detail:"",life:3e3}),await this.getBooks(),this.reloadPageInfo(),this.loading=!1):this.loading=!1},deleteBookById(t){this.$confirm.require({message:`確定要刪除此本書籍 『${t.title?t.title:""}』 嗎?`,header:"刪除警告",icon:"pi pi-exclamation-triangle",accept:async()=>{const o=await(0,p.MC)(t.id).then((t=>t));200===o.status&&(this.$toast.add({severity:"success",summary:"刪除成功",detail:"",life:3e3}),await this.getBooks(),this.reloadPageInfo())},reject:()=>{}})},async onPage(t){this.$store.commit("endowBooksPageCurrentStart",this.rows*t.page),this.$store.commit("endowBooksPageCurrentEnd",this.rows*(t.page+1)),this.reloadPageInfo()},filterBookByTitle(){const t=this.books.filter((t=>!!t.title&&t.title.includes(this.$store.state.bookKeyWord)));return t},reloadPageInfo(){if(this.bookKeyWord){const t=this.filterBookByTitle();this.booksOfPage=t.slice(this.$store.state.booksPageCurrentStart,this.$store.state.booksPageCurrentEnd),this.pageCount=t.length}else this.booksOfPage=this.books.slice(this.$store.state.booksPageCurrentStart,this.$store.state.booksPageCurrentEnd),this.pageCount=this.books.length;this.$refs.paginator.d_first=this.$store.state.booksPageCurrentStart},searchBook(){this.$store.commit("endowBooksKeyWord",this.bookKeyWord),this.$store.commit("endowBooksPageCurrentStart",0),this.$store.commit("endowBooksPageCurrentEnd",this.rows),this.reloadPageInfo(),this.$refs.paginator.d_first=0}}},f=e(89);const w=(0,f.Z)(b,[["render",k],["__scopeId","data-v-3718eedd"]]);var y=w}}]);
//# sourceMappingURL=104.0b13242d.js.map